<!doctype html>
<html class="theme-next use-motion ">
<head>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">


<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.3"/>


    <meta name="description" content="notes for study" />



  <meta name="keywords" content="Hexo,next" />



  <link rel="alternate" href="/atom.xml" title="Yt's Blog" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.3" />



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    analytics: {
      google: ''
    },
    sidebar: 'post'
  };
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?b8a916e09c6b39221eb089c8ad75ede9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <title> ios reverse tutorial // Yt's Blog </title>
</head>

<body>
<!--[if lte IE 8]> <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'> <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari." style='margin-left:auto;margin-right:auto;display: block;'/></a></div> <![endif]-->
  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">Yt's Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br />
          首頁
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br />
          分類
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br />
          關於
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br />
          歸檔
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br />
          標籤
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              ios reverse tutorial
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          發表於 2015-05-30
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分類於
            
              <a href="/categories/IOS/">IOS</a>

              
              
                ， 
              

            
              <a href="/categories/IOS/reverse/">reverse</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2015/05/30/ios-reverse-tutorial/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/05/30/ios-reverse-tutorial/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h2 id="setting_platform">setting platform</h2><h3 id="jailbreak">jailbreak</h3><h3 id="add_sources">add sources</h3><pre><code><span class="number">1</span>. apt.<span class="number">178</span><span class="class">.com</span>
<span class="number">2</span>. apt<span class="class">.weiphone</span><span class="class">.com</span>
</code></pre><h3 id="install_tools">install tools</h3><pre><code><span class="label">openssh</span>
<span class="keyword">BigBoss </span>Recommended tools
<span class="label">MobileTerminal</span>
</code></pre><h3 id="ssh_login">ssh login</h3><pre><code><span class="keyword">user</span>: <span class="literal">root</span> pwd:alpine
change <span class="literal">password</span> <span class="constant">G</span>JJ123456
</code></pre><h3 id="update">update</h3><pre><code>apt-<span class="built_in">get</span> <span class="keyword">update</span>
apt-<span class="built_in">get</span> upgrade
</code></pre><a id="more"></a>
<h2 id="get_class_information">get class information</h2><h3 id="Dumping_class_information">Dumping class information</h3><blockquote>
<p>user app diretory<br>/private/var/mobile/Containers/Bundle/Application/</p>
</blockquote>
<pre><code>scp <span class="class"><span class="keyword">class</span>-<span class="title">dump</span>-<span class="title">z</span> <span class="title">root</span>@192.168.1.101:<span class="typename">/var/root</span></span>
cp <span class="class"><span class="keyword">class</span>-<span class="title">dump</span>-<span class="title">z</span> /<span class="title">usr</span>/<span class="title">bin</span></span>
chmod <span class="number">755</span> /usr/bin/<span class="class"><span class="keyword">class</span>-<span class="title">dump</span>-<span class="title">z</span></span>

Clutch -i
Clutch -d com.tencent.mipadqq
cd /<span class="keyword">private</span>/<span class="variable"><span class="keyword">var</span>/mobile/Documents/Dumped</span>
</code></pre><h3 id="Keychain-Dumper">Keychain-Dumper</h3><pre><code><span class="comment">//赋予Keychain数据库可读权限</span>
cd /private/var/Keychains/ 
chmod +r keychain-<span class="number">2</span><span class="class">.db</span>
keychain_dumper &gt; keychain-export<span class="class">.txt</span> 
</code></pre><h2 id="Cycript">Cycript</h2><h3 id=""> </h3><ol>
<li>The Text Section: This section is largely for read-only data,For example,<br> it includes the source code section, the C-type strings section, the constants, etc</li>
<li>The Data Section: This section is largely for writable data from the program.<br> This includes the bss section for static variables, the common section for global variables, etc<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">print</span> out Meme Collector’s Mach-O header</span><br><span class="line">otool -h Meme\ Collector</span><br><span class="line"></span><br><span class="line">otool <span class="operator">-l</span> Meme\ Collector</span><br><span class="line">//find sectname __classname section |  __objc_classname</span><br><span class="line"></span><br><span class="line">//displays the global offset of <span class="built_in">where</span> the strings are <span class="keyword">in</span> the binary</span><br><span class="line">strings -o Meme\ Collector</span><br><span class="line"></span><br><span class="line">//The nm <span class="built_in">command</span> displays information regarding the symbol table</span><br><span class="line">nm Meme\ Collector | grep aSecretFunction</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2013/07/Terminal-Binary-Sections-700x437.png" alt=""></p>
<h3 id="App_Extension_脱壳">App Extension 脱壳</h3><blockquote>
<ol>
<li>从app store下载的app和app extension是加过密的</li>
<li>iPhone applications的解密办法: dumpdecrypted, app脱壳开源工具.原理是：将应用程序运行起来（iOS系统会先解密程序再启动）<br>，然后将内存中的解密结果dump写入文件中，得到一个新的可执行程序</li>
<li>iPhone app extensions的特别之处, dumpdecrypted 无法实现对iPhone app extensions的脱壳<blockquote>
<p>app extension虽是独立进程，但不可独立运行<br>app extension的进程中，写权限被严格控制</p>
</blockquote>
</li>
<li>修改版dumpdecrypted：<blockquote>
<ol>
<li>本地编译好 dumpdecrypted.dylib</li>
<li>指定作用的Extension Bundle</li>
<li>将 dumpdecrypted.plist 和 dumpdecrypted.dylib 拷贝至越狱机的<br>/Library/MobileSubstrate/DynamicLibraries/ 下</li>
<li>利用系统相册启动微信的Share Extension</li>
</ol>
</blockquote>
</li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//查看加密</span><br><span class="line">otool <span class="operator">-l</span> binary_name | grep crypt</span><br><span class="line"></span><br><span class="line">// 修改版dumpdecrypted</span><br><span class="line">vim dumpdecrypted.plist</span><br><span class="line">&#123;</span><br><span class="line">    Filter = &#123;</span><br><span class="line">        Bundles = (<span class="string">"com.tencent.xin.sharetimeline"</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//当微信的Share Extension被启动时，解密插件自动工作。值得注意的是，</span><br><span class="line">//如果你的越狱机是armv7架构，那么也就只dump armv7那部分；如果越狱机是arm64架构，</span><br><span class="line">//那么也就只dump arm64那部分。得到干净的dump结果执行下面</span><br><span class="line">$ lipo -thin armv7 xxx.decrypted -output xxx_armv7.decrypted //或者</span><br><span class="line">$ lipo -thin armv64 xxx.decrypted -output xxx_arm64.decrypted</span><br></pre></td></tr></table></figure>
<h3 id="iOS应用逆向常用工具">iOS应用逆向常用工具</h3><pre><code>-<span class="ruby"> <span class="constant">Reveal</span>
</span>-<span class="ruby"> <span class="constant">Cycript</span>
</span>-<span class="ruby"> <span class="constant">Class</span>-dump
</span>-<span class="ruby"> <span class="constant">Keychain</span>-<span class="constant">Dumper</span>
</span>-<span class="ruby"> gdb
</span>-<span class="ruby"> iNalyzer
</span>-<span class="ruby"> introspy
</span>-<span class="ruby"> <span class="constant">Fishhook</span>
</span>-<span class="ruby"> removePIE
</span>-<span class="ruby"> <span class="constant">IDA</span> pro <span class="keyword">or</span> <span class="constant">Hopper</span>
</span>-<span class="ruby"> snoop-it
</span>-<span class="ruby"> iDB
</span>-<span class="ruby"> <span class="constant">Charles</span>
</span>-<span class="ruby"> <span class="constant">SSL</span> <span class="constant">Kill</span> <span class="constant">Switch</span></span>
</code></pre><h4 id="常用的命令和工具">常用的命令和工具</h4><pre><code>-<span class="ruby"> ps           ——显示进程状态，<span class="constant">CPU</span>使用率，内存使用情况等
</span>-<span class="ruby"> sysctl       ——检查设定<span class="constant">Kernel</span>配置
</span>-<span class="ruby"> netstat     ——显示网络连接，路由表，接口状态等
</span>-<span class="ruby"> route        ——路由修改
</span>-<span class="ruby"> renice       ——调整程序运行的优先级
</span>-<span class="ruby"> ifconfig    ——查看网络配置
</span>-<span class="ruby"> tcpdump   ——截获分析网络数据包
</span>-<span class="ruby"> lsof           ——列出当前系统打开的文件列表，别忘记一切皆文件，包括网络连接、硬件等
</span>-<span class="ruby"> otool ①     ——查看程序依赖哪些动态库信息，反编代码段……等等等等
</span>-<span class="ruby"> nm ②        ——显示符号表
</span>-<span class="ruby"> ldid ③      ——签名工具
</span>-<span class="ruby"> gdb          ——调试工具
</span>-<span class="ruby"> patch       ——补丁工具
</span>-<span class="ruby"> <span class="constant">SSH</span>         ——远程控制</span>
</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//可查看可执行程序都链接了那些库</span><br><span class="line">otool  -L WQAlbum </span><br><span class="line">//可以反编译WQAlbum的__TEXT__段内容, 截前<span class="number">10</span>行：</span><br><span class="line">otool -tV WQAlbum |head -n <span class="number">10</span></span><br><span class="line"></span><br><span class="line">//nm，显示程序符号表，用我自己的应用程序私人相册现身说法一下</span><br><span class="line">nm -g WQAlbum  （ -g 代表 global） </span><br><span class="line"></span><br><span class="line">//ldid，是iPhoneOS.platform提供的签名工具，我们自己编译的程序需要签上名才能跑在iPhone/iPad上，使用方法</span><br><span class="line"><span class="built_in">export</span> CODESIGN_ALLOCATE=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate</span><br><span class="line">ldid -S helloworld</span><br></pre></td></tr></table></figure>
<h3 id="裸奔app的安全隐患">裸奔app的安全隐患</h3><pre><code>-<span class="ruby"> 任意读写文件系统数据
</span>-<span class="ruby"> <span class="constant">HTTP</span>(<span class="constant">S</span>)实时被监测
</span>-<span class="ruby"> 重新打包ipa
</span>-<span class="ruby"> 暴露的函数符号
</span>-<span class="ruby"> 未加密的静态字符
</span>-<span class="ruby"> 篡改程序逻辑控制流
</span>-<span class="ruby"> 拦截系统框架<span class="constant">API</span>
</span>-<span class="ruby"> 逆向加密逻辑
</span>-<span class="ruby"> 跟踪函数调用过程（objc_msgSend）
</span>-<span class="ruby"> 可见视图的具体实现
</span>-<span class="ruby"> 伪造设备标识
</span>-<span class="ruby"> 可用的<span class="constant">URL</span> schemes
</span>-<span class="ruby"> runtime任意方法调用
</span>-<span class="ruby"> ……</span>
</code></pre><h4 id="cycript">cycript</h4><h5 id="Objective-C_objects_from_addresses">Objective-C objects from addresses</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">var</span> <span class="tag">p</span> = new <span class="function"><span class="title">Instance</span><span class="params">(<span class="number">0</span>x8614390)</span></span></span><br></pre></td></tr></table></figure>
<h5 id="Getting_ivars">Getting ivars</h5><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//*varName</span></span><br><span class="line">cy<span class="preprocessor"># *controller</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tryPrintIvars</span><span class="params">(a)</span></span>&#123; <span class="keyword">var</span> x=&#123;&#125;; <span class="keyword">for</span>(i <span class="keyword">in</span> *a)&#123; <span class="keyword">try</span>&#123; x[i] = (*a)[i]; &#125; <span class="keyword">catch</span>(e)&#123;&#125; &#125; <span class="keyword">return</span> x; &#125;</span><br><span class="line">cy<span class="preprocessor"># tryPrintIvars(a)</span></span><br></pre></td></tr></table></figure>
<h5 id="Getting_methods">Getting methods</h5><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function printMethods(className) &#123;</span><br><span class="line">  <span class="keyword">var</span> count = new new <span class="type">Type</span>(<span class="string">"I"</span>);</span><br><span class="line">  <span class="keyword">var</span> methods = class_copyMethodList(objc_getClass(className), count);</span><br><span class="line">  <span class="keyword">var</span> methodsArray = [];</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; *count; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">method</span> = methods[i];</span><br><span class="line">    methodsArray.push(&#123;selector:method_getName(<span class="keyword">method</span>), implementation:method_getImplementation(<span class="keyword">method</span>)&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  free(methods);</span><br><span class="line">  free(count);</span><br><span class="line">  <span class="keyword">return</span> methodsArray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cy<span class="comment"># printMethods("MailboxPrefsTableCell")</span></span><br></pre></td></tr></table></figure>
<h5 id="Get_methods_matching_particular_RegExp">Get methods matching particular RegExp</h5><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">methodsMatching</span><span class="params">(cls, regexp)</span> &#123;</span> return [[new Selector<span class="params">(m)</span>.type<span class="params">(cls)</span>, m] <span class="keyword">for</span> <span class="params">(m in cls.messages)</span> <span class="keyword">if</span> <span class="params">(!regexp || regexp.test<span class="params">(m)</span>)</span>]; &#125;</span><br><span class="line">cy<span class="built_in">#</span> methodsMatching<span class="params">(NSRunLoop, /forKey:$/)</span></span><br></pre></td></tr></table></figure>
<h5 id="Getting_class_methods">Getting class methods</h5><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="atom">cy</span># <span class="name">NSRunLoop</span>-&gt;<span class="atom">isa</span>.<span class="atom">messages</span>[<span class="string">'currentRunLoop'</span>] = ...</span><br></pre></td></tr></table></figure>
<h5 id="Replacing_existing_Objective-C_methods_func-call(self,_arg1,_arg2,_arg3,_…)">Replacing existing Objective-C methods func.call(self, arg1, arg2, arg3, …)</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cy# original_NSRunLoop_description = NSRunLoop.<span class="keyword">messages</span>[<span class="string">'description'</span>];</span><br><span class="line">cy# NSRunLoop.<span class="keyword">messages</span>[<span class="string">'description'</span>] = <span class="function"><span class="keyword">function</span><span class="params">()</span> &#123; <span class="title">return</span> <span class="title">original_NSRunLoop_description</span>.<span class="title">call</span><span class="params">(this)</span>.<span class="title">toString</span><span class="params">()</span>.<span class="title">substr</span><span class="params">(0, 80)</span>+", <span class="title">etc</span>."; &#125;</span></span><br><span class="line">cy# [NSRunLoop currentRunLoop]</span><br><span class="line"><span class="string">"&lt;CFRunLoop 0x205ee0 [0x381dbff4]&gt;&#123;locked = false, wait port = 0x1303, stopped = , etc."</span></span><br><span class="line"></span><br><span class="line">cy# original_SpringBoard_menuButtonDown = SpringBoard.<span class="keyword">messages</span>[<span class="string">'menuButtonDown:'</span>]</span><br><span class="line">cy# SpringBoard.<span class="keyword">messages</span>[<span class="string">'menuButtonDown:'</span>] = <span class="function"><span class="keyword">function</span><span class="params">(arg1)</span> &#123;<span class="title">original_SpringBoard_menuButtonDown</span>.<span class="title">call</span><span class="params">(this, arg1)</span>;&#125;</span></span><br></pre></td></tr></table></figure>
<h5 id="Load_frameworks">Load frameworks</h5><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadFramework</span><span class="params">(fw)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> h=<span class="string">"/System/Library/"</span>,t=<span class="string">"Frameworks/"</span>+fw+<span class="string">".framework"</span>;</span><br><span class="line">  [[NSBundle bundleWithPath:h+t]||[NSBundle bundleWithPath:h+<span class="string">"Private"</span>+t] load];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Include_other_Cycript_files">Include other Cycript files</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">localhost:</span>~ mobile$ cycript -p SpringBoard main.cy</span><br><span class="line"><span class="string">localhost:</span>~ mobile$ cycript -p SpringBoard</span><br><span class="line"></span><br><span class="line"><span class="comment">// include other .cy files</span></span><br><span class="line">function include(fn) &#123;</span><br><span class="line">  var t = [<span class="keyword">new</span> NSTask init]; [t <span class="string">setLaunchPath:</span>@<span class="string">"/usr/bin/cycript"</span>]; [t <span class="string">setArguments:</span>[<span class="string">"-c"</span>, fn]];</span><br><span class="line">  var p = [NSPipe pipe]; [t <span class="string">setStandardOutput:</span>p]; [t launch]; [t waitUntilExit]; </span><br><span class="line">  var s = [<span class="keyword">new</span> NSString <span class="string">initWithData:</span>[[p fileHandleForReading] readDataToEndOfFile] <span class="string">encoding:</span><span class="number">4</span>];</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.eval(s.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Using_NSLog">Using NSLog</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cy# NSLog_ = dlsym(RTLD_DEFAULT, <span class="string">"NSLog"</span>)</span><br><span class="line"><span class="number">0x31451329</span></span><br><span class="line">cy# NSLog = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">var</span> types = <span class="string">'v'</span>, args = [], count = <span class="built_in">arguments</span>.length; <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i != count; ++i) &#123; types += <span class="string">'@'</span>; args.push(<span class="built_in">arguments</span>[i]); &#125; <span class="keyword">new</span> Functor(NSLog_, types).apply(<span class="literal">null</span>, args); &#125;</span><br><span class="line">&#123;&#125;</span><br><span class="line">cy# NSLog(<span class="string">"w ivars: %@"</span>, tryPrintIvars(w))</span><br><span class="line"><span class="comment">//If you are attached to a process, the output is going to be in the syslog:</span></span><br></pre></td></tr></table></figure>
<h5 id="Using_CGGeometry_functions">Using CGGeometry functions</h5><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">function</span> <span class="tag">CGPointMake</span>(x, y) &#123; <span class="tag">return</span> &#123;<span class="attribute">x</span>:x, <span class="attribute">y</span>:y&#125;; &#125;</span><br><span class="line"><span class="tag">function</span> <span class="tag">CGSizeMake</span>(w, h) &#123; <span class="tag">return</span> &#123;<span class="attribute">width</span>:w, <span class="attribute">height</span>:h&#125;; &#125;</span><br><span class="line"><span class="tag">function</span> <span class="tag">CGRectMake</span>(x, y, w, h) &#123; <span class="tag">return</span> &#123;<span class="attribute">origin</span>:<span class="function">CGPointMake</span>(x,y), <span class="attribute">size</span>:<span class="function">CGSizeMake</span>(w, h)&#125;; &#125;</span><br></pre></td></tr></table></figure>
<h5 id="Writing_Cycript_output_to_file">Writing Cycript output to file</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[someObject someFunction] <span class="string">writeToFile:</span><span class="string">"/var/mobile/cycriptoutput.txt"</span> <span class="string">atomically:</span>NO <span class="string">encoding:</span><span class="number">4</span> <span class="string">error:</span>NULL]</span><br></pre></td></tr></table></figure>
<p>You can use this, for example, to get a dump of SpringBoard’s view tree<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">iPhone:</span>~$ cycript -p SpringBoard</span><br><span class="line">cy# [[UIApp-&gt;_uiController.window recursiveDescription] <span class="string">writeToFile:</span><span class="string">"/var/mobile/viewdump.txt"</span> <span class="string">atomically:</span>NO <span class="string">encoding:</span><span class="number">4</span> <span class="string">error:</span>NULL]</span><br></pre></td></tr></table></figure></p>
<h5 id="Printing_view_hierarchy">Printing view hierarchy</h5><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cy<span class="comment"># ?expand</span></span><br><span class="line"><span class="variable">expand =</span>= <span class="constant">true</span></span><br><span class="line">cy<span class="comment"># UIApp.keyWindow.recursiveDescription</span></span><br></pre></td></tr></table></figure>
<h5 id="Cycript_scripts">Cycript scripts</h5><p>Custom shell function that loads a cycript file:<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">cyc () </span><span class="expression">&#123; <span class="variable">cycript</span> <span class="variable">-p</span> $1 <span class="end-block">/var</span><span class="end-block">/root</span><span class="end-block">/common.cy </span>&gt; <span class="end-block">/dev</span><span class="end-block">/null</span>; <span class="variable">cycript</span> <span class="variable">-p</span> $1; &#125;</span><span class="xml"></span><br><span class="line">Usage: cyc ProcessName</span></span><br></pre></td></tr></table></figure></p>
<p>Add this to /etc/profile.d/cycript.sh to make it available in all sessions.</p>
<h5 id="Weak_Classdump_(Cycript_based_class-dump)">Weak Classdump (Cycript based class-dump)</h5><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root<span class="comment"># cycript -p Skype weak_classdump.cy; cycript -p Skype</span></span><br><span class="line"> 'Added weak_classdump <span class="keyword">to</span> <span class="string">"Skype"</span> (<span class="number">1685</span>)'</span><br><span class="line"> cy<span class="comment"># UIApp</span></span><br><span class="line"> <span class="string">"&lt;HellcatApplication: 0x1734e0&gt;"</span></span><br><span class="line"> cy<span class="comment"># weak_classdump(HellcatApplication);</span></span><br><span class="line"> <span class="string">"Wrote file to /tmp/HellcatApplication.h"</span></span><br><span class="line"> cy<span class="comment"># UIApp.delegate</span></span><br><span class="line"> <span class="string">"&lt;SkypeAppDelegate: 0x194db0&gt;"</span></span><br><span class="line"> cy<span class="comment"># weak_classdump(SkypeAppDelegate,"/someDirWithWriteAccess/");</span></span><br><span class="line"> <span class="string">"Wrote file to /someDirWithWriteAccess/SkypeAppDelegate.h"</span></span><br><span class="line"> root<span class="comment"># cycript -p iapd weak_classdump.cy; cycript -p iapd</span></span><br><span class="line"> 'Added weak_classdump <span class="keyword">to</span> <span class="string">"iapd"</span> (<span class="number">1127</span>)'</span><br><span class="line"> cy<span class="comment"># weak_classdump(IAPPortManager)</span></span><br><span class="line"> <span class="string">"Wrote file to /tmp/IAPPortManager.h"</span></span><br><span class="line"> root<span class="comment"># cycript -p MobilePhone weak_classdump.cy; cycript -p MobilePhone</span></span><br><span class="line"> 'Added weak_classdump <span class="keyword">to</span> <span class="string">"MobilePhone"</span> (<span class="number">385</span>)'</span><br><span class="line"> <span class="comment">#cy weak_classdump_bundle([NSBundle mainBundle],"/tmp/MobilePhone")</span></span><br><span class="line"> <span class="string">"Dumping bundle... Check syslog. Will play lock sound when done."</span></span><br></pre></td></tr></table></figure>
<h3 id="Yahoo_Weather_app">Yahoo Weather app</h3><h4 id="install">install</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i cycript.deb</span><br></pre></td></tr></table></figure>
<h4 id="use">use</h4><ol>
<li>ps aux | grep “weather”</li>
<li>cycript -p 1710</li>
<li>var app = [UIApplication sharedApplication] &amp;&amp; UIApp(default val)</li>
<li>var appdelegate = app.delegate</li>
<li>UIApp.windows</li>
<li>UIApp.keyWindow.rootViewController</li>
<li>printMethods(YWAppDelegate)  //printMethods see defintion above</li>
<li>[[[[[UIApplication sharedApplication] keyWindow] subviews] objectAtIndex:0] nextResponder].topViewController</li>
<li>printMethods(YWMainViewController)</li>
<li>[[[[[[UIApplication sharedApplication] keyWindow] subviews] objectAtIndex:0] nextResponder].topViewController userDidRequestUpdate]</li>
<li>tryPrintIvars([[[[[UIApplication sharedApplication] keyWindow] subviews] objectAtIndex:0] nextResponder].topViewController)</li>
</ol>
<h3 id="Method_Swizzling_Using_Cycript">Method Swizzling Using Cycript</h3><ol>
<li>cy# Appdelegate-&gt;isa.messages</li>
<li>Appdelegate.messages</li>
<li>ViewController.messages</li>
<li>ViewController.messages[‘validateLogin’] = function(){return true}//Swizzling</li>
<li>[UIApp.keyWindow.rootViewController.visibleViewController pushLoginPage]</li>
</ol>
<h3 id="IOS_fileSystem">IOS fileSystem</h3><ol>
<li>user <code>mobile</code>, <code>ps aux</code></li>
<li>cydia dufault user <code>root</code> password <code>alpine</code></li>
<li>/Applications   ————-   system preinstalled or cydia installed</li>
<li>/private/var/mobile/Applications</li>
<li>/var/mobile/Library/AddressBook</li>
<li>sqlite3 AddressBook.sqlitedb</li>
<li>.tables</li>
<li>select * from ABPserson;</li>
<li>/private/var/wireless/Library/CallHistory</li>
<li>sqlite3 call_history.db</li>
<li>plutil -convert xml1 System/Library/Backup/Domains.plist</li>
</ol>

      
    </div>

    <div class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/05/30/ios-reverse-myapp/">ios reverse myapp</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/05/30/ios-reverse/">ios reverse</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/avatar.png" alt="Yt" />
          <p class="site-author-name">Yt</p>
        </div>
        <p class="site-description motion-element">notes for study</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">94</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">22</span>
              <span class="site-state-item-name">分類</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">標籤</span>
              </a>
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/ytlvy" target="_blank">GitHub</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/ytlvy" target="_blank">Twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://nshipster.com" target="_blank">NSHipster</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.mikeash.com/pyblog" target="_blank">NSBlog</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.objc.io" target="_blank">objcio</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.raywenderlich.com" target="_blank">raywenderlich</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

      </div>

      
        <div class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#setting_platform"><span class="nav-number">1.</span> <span class="nav-text">setting platform</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jailbreak"><span class="nav-number">1.1.</span> <span class="nav-text">jailbreak</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#add_sources"><span class="nav-number">1.2.</span> <span class="nav-text">add sources</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#install_tools"><span class="nav-number">1.3.</span> <span class="nav-text">install tools</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ssh_login"><span class="nav-number">1.4.</span> <span class="nav-text">ssh login</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#update"><span class="nav-number">1.5.</span> <span class="nav-text">update</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#get_class_information"><span class="nav-number">2.</span> <span class="nav-text">get class information</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Dumping_class_information"><span class="nav-number">2.1.</span> <span class="nav-text">Dumping class information</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Keychain-Dumper"><span class="nav-number">2.2.</span> <span class="nav-text">Keychain-Dumper</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cycript"><span class="nav-number">3.</span> <span class="nav-text">Cycript</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#"><span class="nav-number">3.1.</span> <span class="nav-text"> </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#App_Extension_脱壳"><span class="nav-number">3.2.</span> <span class="nav-text">App Extension 脱壳</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iOS应用逆向常用工具"><span class="nav-number">3.3.</span> <span class="nav-text">iOS应用逆向常用工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#常用的命令和工具"><span class="nav-number">3.3.1.</span> <span class="nav-text">常用的命令和工具</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#裸奔app的安全隐患"><span class="nav-number">3.4.</span> <span class="nav-text">裸奔app的安全隐患</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cycript"><span class="nav-number">3.4.1.</span> <span class="nav-text">cycript</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Objective-C_objects_from_addresses"><span class="nav-number">3.4.1.1.</span> <span class="nav-text">Objective-C objects from addresses</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Getting_ivars"><span class="nav-number">3.4.1.2.</span> <span class="nav-text">Getting ivars</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Getting_methods"><span class="nav-number">3.4.1.3.</span> <span class="nav-text">Getting methods</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Get_methods_matching_particular_RegExp"><span class="nav-number">3.4.1.4.</span> <span class="nav-text">Get methods matching particular RegExp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Getting_class_methods"><span class="nav-number">3.4.1.5.</span> <span class="nav-text">Getting class methods</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Replacing_existing_Objective-C_methods_func-call(self,_arg1,_arg2,_arg3,_…)"><span class="nav-number">3.4.1.6.</span> <span class="nav-text">Replacing existing Objective-C methods func.call(self, arg1, arg2, arg3, …)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Load_frameworks"><span class="nav-number">3.4.1.7.</span> <span class="nav-text">Load frameworks</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Include_other_Cycript_files"><span class="nav-number">3.4.1.8.</span> <span class="nav-text">Include other Cycript files</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using_NSLog"><span class="nav-number">3.4.1.9.</span> <span class="nav-text">Using NSLog</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Using_CGGeometry_functions"><span class="nav-number">3.4.1.10.</span> <span class="nav-text">Using CGGeometry functions</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Writing_Cycript_output_to_file"><span class="nav-number">3.4.1.11.</span> <span class="nav-text">Writing Cycript output to file</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Printing_view_hierarchy"><span class="nav-number">3.4.1.12.</span> <span class="nav-text">Printing view hierarchy</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Cycript_scripts"><span class="nav-number">3.4.1.13.</span> <span class="nav-text">Cycript scripts</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Weak_Classdump_(Cycript_based_class-dump)"><span class="nav-number">3.4.1.14.</span> <span class="nav-text">Weak Classdump (Cycript based class-dump)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Yahoo_Weather_app"><span class="nav-number">3.5.</span> <span class="nav-text">Yahoo Weather app</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#install"><span class="nav-number">3.5.1.</span> <span class="nav-text">install</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#use"><span class="nav-number">3.5.2.</span> <span class="nav-text">use</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method_Swizzling_Using_Cycript"><span class="nav-number">3.6.</span> <span class="nav-text">Method Swizzling Using Cycript</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IOS_fileSystem"><span class="nav-number">3.7.</span> <span class="nav-text">IOS fileSystem</span></a></li></ol></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </div>
      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp; 
  2015
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Yt</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="theme-info">
  <span id="busuanzi_container_site_uv">
    &nbsp&nbsp&nbsp&nbsp|&nbsp&nbsp Total <span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span> views.
您是本站的第<span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span>个小伙伴
<span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Hits
  </span>
<div>
      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js"></script>


  <script type="text/javascript" src="/js/helpers.js"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js" id="motion.global"></script>




  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var $sidebarInner = $('.sidebar-inner');
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.didShow', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;
          var self = this;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      $(indicator).velocity('stop').velocity({
        opacity: action === 'show' ? 0.4 : 0
      }, { duration: 100 });
    }

  });
</script>


  <script type="text/javascript" id="sidebar.nav">
    $(document).ready(function () {
      var html = $('html');

      $('.sidebar-nav li').on('click', function () {
        var item = $(this);
        var activeTabClassName = 'sidebar-nav-active';
        var activePanelClassName = 'sidebar-panel-active';
        if (item.hasClass(activeTabClassName)) {
          return;
        }

        var currentTarget = $('.' + activePanelClassName);
        var target = $('.' + item.data('target'));

        currentTarget.velocity('transition.slideUpOut', 200, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', 200)
            .addClass(activePanelClassName);
        });

        item.siblings().removeClass(activeTabClassName);
        item.addClass(activeTabClassName);
      });

      $('.post-toc a').on('click', function (e) {
        e.preventDefault();
        var offset = $(escapeSelector(this.getAttribute('href'))).offset().top;
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        });
      });

      // Expand sidebar on post detail page by default, when post has a toc.
      var $tocContent = $('.post-toc-content');
      if (isDesktop() && CONFIG.sidebar === 'post') {
        if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
          displaySidebar();
        }
      }
    });
  </script>




  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  
  

  

    
      
    

    <script type="text/javascript">
      var disqus_shortname = 'ytlvy';
      var disqus_identifier = '2015/05/30/ios-reverse-tutorial/';
      var disqus_title = 'ios reverse tutorial';
      var disqus_url = 'http://ytlvy.com/2015/05/30/ios-reverse-tutorial/';

      (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }());
    </script>
  




  
  

</body>
</html>
